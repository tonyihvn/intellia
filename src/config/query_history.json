[
  {
    "id": "ce1f11ab-80e3-484a-b2f7-ac30b5153405",
    "timestamp": "2025-11-03T12:10:59.911460",
    "command": "Get all the names and addresses of the first 50 people and display in a table",
    "type": "query_preview",
    "sql": "SELECT\n    person_name.given_name,  -- First name\n    person_name.middle_name, -- Middle name\n    person_name.family_name,  -- Last name\n    address.address1,       -- Address line 1\n    address.address2,       -- Address line 2\n    address.city_village,   -- City/Village\n    address.state_province, -- State/Province\n    address.postal_code,    -- Postal Code\n    address.country         -- Country\nFROM\n    person\nLEFT JOIN\n    person_name ON person.person_id = person_name.person_id AND person_name.voided = 0\nLEFT JOIN\n    person_address AS address ON person.person_id = address.person_id AND address.voided = 0\nLIMIT 50;",
    "explanation": "```sql\n-- Assuming 'person' table contains names and addresses.  Adjust table and column names as needed.\n\n```",
    "status": "success",
    "error": null,
    "result": {
      "type": "sql_executed",
      "results": [
        {
          "given_name": "ADMIN",
          "middle_name": null,
          "family_name": "ADMIN",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Strategic",
          "middle_name": null,
          "family_name": "Information",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "test",
          "middle_name": null,
          "family_name": "test",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Dr Sarah",
          "middle_name": null,
          "family_name": "Walima",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Clinical",
          "middle_name": null,
          "family_name": "Department",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Dr Mamven",
          "middle_name": null,
          "family_name": null,
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "MBAJOE",
          "middle_name": null,
          "family_name": "MBACHIRIN",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Richard",
          "middle_name": null,
          "family_name": "Joseph",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "ADA",
          "middle_name": null,
          "family_name": "SUNDAY",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Pharm. Promise Emole",
          "middle_name": null,
          "family_name": "Police Hospital",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Moret",
          "middle_name": null,
          "family_name": "Bal",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Olukunle",
          "middle_name": null,
          "family_name": "Ogundeji",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Damilola",
          "middle_name": null,
          "family_name": "Adamoh",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Temitope",
          "middle_name": null,
          "family_name": "Akande",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "nanwal",
          "middle_name": null,
          "family_name": "danbaki",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Nawal",
          "middle_name": null,
          "family_name": "Danbaki",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Victoria",
          "middle_name": null,
          "family_name": "Orshaka",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "MERCY",
          "middle_name": null,
          "family_name": "ADANEBI",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "VICTORIA",
          "middle_name": null,
          "family_name": "ORSHAKA",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Kyenpiya",
          "middle_name": null,
          "family_name": "Dalu",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Dr.",
          "middle_name": null,
          "family_name": "Welle",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Nurse",
          "middle_name": null,
          "family_name": "Etorji",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Lab",
          "middle_name": null,
          "family_name": "Asen",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "SERAH",
          "middle_name": null,
          "family_name": "ADU",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "SULE",
          "middle_name": null,
          "family_name": "TITUS",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "SARAH",
          "middle_name": null,
          "family_name": "ADU",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "VICTOR",
          "middle_name": null,
          "family_name": "BADEJO",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "GAIDI",
          "middle_name": null,
          "family_name": "STEPHEN",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Gloria",
          "middle_name": null,
          "family_name": "Philips",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Nanle",
          "middle_name": "Ephraim",
          "family_name": "Ibrahim",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "John",
          "middle_name": null,
          "family_name": "Smith",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Jane",
          "middle_name": null,
          "family_name": "Smith",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Jake",
          "middle_name": null,
          "family_name": "Smith",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "Julie",
          "middle_name": null,
          "family_name": "Smith",
          "address1": null,
          "address2": null,
          "city_village": null,
          "state_province": null,
          "postal_code": null,
          "country": null
        },
        {
          "given_name": "AKPORFURE",
          "middle_name": null,
          "family_name": "PETER",
          "address1": null,
          "address2": null,
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "EMEKA",
          "middle_name": null,
          "family_name": "JULIUS",
          "address1": null,
          "address2": "AREA 2 SECTION 1",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "EMEKA",
          "middle_name": null,
          "family_name": "JULIUS",
          "address1": null,
          "address2": "AREA 12 BLOCK ALEME ABUJA",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "Rhapheal",
          "middle_name": null,
          "family_name": "Ajiboye",
          "address1": null,
          "address2": "block 86 kubwaba kubo",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "IKWO",
          "middle_name": null,
          "family_name": "EDET",
          "address1": null,
          "address2": "KARIMAJIJI AIRPORT ROAD",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "ADUSE",
          "middle_name": "POKU",
          "family_name": "KWAKU",
          "address1": null,
          "address2": "STELLA MARI STAFF QUARTER",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "ENE",
          "middle_name": null,
          "family_name": "UBATIA",
          "address1": null,
          "address2": "UTAKO FCT ABUJA",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "UKPAI",
          "middle_name": null,
          "family_name": "VIRGINIA",
          "address1": null,
          "address2": "DURUMI 2 NEW SITE CLOSE TO TRANSFORMER",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "OKEREKE",
          "middle_name": null,
          "family_name": "VINCENT",
          "address1": null,
          "address2": "AREA 1 SECTION",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "ABDULAHI",
          "middle_name": null,
          "family_name": "MAIKRIO",
          "address1": null,
          "address2": "AREA 2 SECTION 2",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "FATIMA",
          "middle_name": null,
          "family_name": "MOHAMMED",
          "address1": null,
          "address2": "CITY GATE POLICE BARRACKS",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "Yusuf",
          "middle_name": null,
          "family_name": "Amina",
          "address1": null,
          "address2": null,
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "ADESAN",
          "middle_name": null,
          "family_name": "ADEBOWALE",
          "address1": "KADO ESTATE",
          "address2": "Gwarinpa",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "KATE",
          "middle_name": null,
          "family_name": "OWALEME",
          "address1": null,
          "address2": "AREA 1 SECTION 1",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "HARRY",
          "middle_name": null,
          "family_name": "JULIANA",
          "address1": null,
          "address2": "DOGONGADA  VILLAGE LOKOGOMA  CLOSE TO MOUNTAIN OF FIRE  CHURCH",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        },
        {
          "given_name": "BABANGEDA",
          "middle_name": null,
          "family_name": "MYINYA",
          "address1": null,
          "address2": "AREA 1 SECTION 1",
          "city_village": "AMAC",
          "state_province": "FCT",
          "postal_code": null,
          "country": "NIGERIA"
        }
      ]
    }
  },
  {
    "id": "27df8880-b593-4e4b-9958-08494ccce500",
    "timestamp": "2025-11-03T11:42:37.253166",
    "command": "Count voided patients",
    "type": "query_preview",
    "sql": "deleted).\nSELECT COUNT(*) AS voided_patient_count\nFROM patient\nWHERE voided = 1;",
    "explanation": "```sql\n-- Count the number of voided patients.\n-- The patient table contains a voided column indicating if a patient is voided (\n```",
    "status": "error",
    "error": "Error executing query: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'deleted).\nSELECT COUNT(*) AS voided_patient_count\nFROM patient\nWHERE voided = 1' at line 1"
  },
  {
    "id": "36ab60cd-066a-49ae-8a03-9c9b953a9cd1",
    "timestamp": "2025-11-03T10:59:53.860661",
    "command": "Every day at 5pm, send an email to team@example.com with daily patient summary",
    "type": "action_preview",
    "sql": "SELECT\n    DATE(encounter.encounter_datetime) AS encounter_date,\n    COUNT(DISTINCT CASE WHEN DATE(encounter.encounter_datetime) = CURDATE() THEN encounter.patient_id ELSE NULL END) AS new_patients,\n    COUNT(DISTINCT encounter.patient_id) AS total_patients\nFROM\n    encounter\nWHERE\n    DATE(encounter.encounter_datetime) >= CURDATE() - INTERVAL 1 DAY -- Consider encounters from yesterday and today\nGROUP BY\n    encounter_date\nORDER BY\n    encounter_date;\n\n-- Explanation:\n-- 1. `DATE(encounter.encounter_datetime)`: Extracts the date part from the encounter datetime.\n-- 2. `new_patients`: Counts distinct patient IDs only for encounters happening today (CURDATE()).  The CASE statement ensures only today's patients are counted.\n-- 3. `total_patients`: Counts all distinct patient IDs in the encounter table.\n-- 4. `FROM encounter`: Specifies the table to retrieve data from.\n-- 5. `WHERE DATE(encounter.encounter_datetime) >= CURDATE() - INTERVAL 1 DAY`: Filters encounters to include only those from yesterday and today. This is important to get the total patients and new patients for the current day.\n-- 6. `GROUP BY encounter_date`: Groups the results by encounter date.\n-- 7. `ORDER BY encounter_date`: Orders the results by encounter date.\n\n-- To use this in an email:\n-- 1.  Schedule a task (e.g., using cron) to run this query every day at 5 PM.\n-- 2.  Use a scripting language (e.g., Python, PHP) to:\n--     - Connect to the MySQL database.\n--     - Execute this query.\n--     - Format the results into a readable email body.\n--     - Send the email to team@example.com.",
    "explanation": "",
    "status": "preview",
    "error": ""
  }
]